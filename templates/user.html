<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Fynd – AI-Powered Product Feedback</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-md navbar-dark">
  <div class="container">
    <a class="navbar-brand fw-bold d-flex align-items-center" href="#">
      <div class="brand-icon me-2">
        <i class="fas fa-comment-alt"></i>
      </div>
      <span class="d-none d-md-inline">FyndFeedback AI</span>
      <span class="d-inline d-md-none">FyndFeedback</span>
    </a>
    
    <!-- Admin Button - Always Visible -->
    <button id="admin-btn-mobile" class="btn btn-admin d-md-none ms-auto me-2">
      <i class="fas fa-chart-line"></i>
    </button>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-md-auto align-items-md-center">
        <li class="nav-item">
          <a class="nav-link" href="#features">Features</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#how-it-works">How It Works</a>
        </li>
        <li class="nav-item d-none d-md-block">
          <button id="admin-btn-desktop" class="btn btn-admin ms-2">
            <i class="fas fa-chart-line me-1"></i> Admin Dashboard
          </button>
        </li>
        <li class="nav-item d-md-none">
          <!-- Mobile version in dropdown -->
          <button id="admin-btn-dropdown" class="btn btn-admin w-100 mt-2">
            <i class="fas fa-chart-line me-1"></i> Admin Dashboard
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <div class="row align-items-center gy-4">
      <div class="col-12 col-lg-6 order-2 order-lg-1">
        <div class="hero-content">
          <span class="hero-tag">AI-POWERED FEEDBACK SYSTEM</span>
          <h1 class="hero-title">
            Your Voice Shapes<br>Our <span class="highlight">Product</span>
          </h1>
          <p class="hero-description">
            Share your experience and receive an <strong>instant AI-generated response</strong>. 
            Every review helps us improve and innovate for you.
          </p>
          
          <div class="hero-stats">
            <div class="stat-item">
              <div class="stat-number">24/7</div>
              <div class="stat-label">AI Analysis</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">Instant</div>
              <div class="stat-label">Responses</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">Real-time</div>
              <div class="stat-label">Insights</div>
            </div>
          </div>
          
          <div class="hero-features">
            <div class="feature">
              <i class="fas fa-check-circle text-primary"></i>
              <span>Get personalized AI replies</span>
            </div>
            <div class="feature">
              <i class="fas fa-check-circle text-primary"></i>
              <span>Help shape product roadmap</span>
            </div>
            <div class="feature">
              <i class="fas fa-check-circle text-primary"></i>
              <span>See your impact in real-time</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-12 col-lg-6 order-1 order-lg-2">
        <div class="review-card">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-star me-2"></i>Share Your Feedback
            </h3>
            <p class="card-subtitle">Your opinion matters to us</p>
          </div>
          
          <div class="product-preview">
            <img src="/static/product.jpg" class="product-image" alt="Our Product" 
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzQzNjFlZSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNmZmZmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5Qcm9kdWN0IEltYWdlPC90ZXh0Pjwvc3ZnPg=='">
            <div class="product-badge">Featured Product</div>
          </div>
          
          <div class="card-body">
            <form id="reviewForm" class="review-form">
              <div class="rating-section mb-4">
                <label class="form-label fw-semibold mb-3">How would you rate our product?</label>
                <div class="star-rating">
                  <input type="radio" id="star5" name="rating" value="5">
                  <label for="star5" title="Excellent" aria-label="5 stars">
                    <i class="fas fa-star"></i>
                  </label>
                  <input type="radio" id="star4" name="rating" value="4">
                  <label for="star4" title="Very Good" aria-label="4 stars">
                    <i class="fas fa-star"></i>
                  </label>
                  <input type="radio" id="star3" name="rating" value="3" checked>
                  <label for="star3" title="Good" aria-label="3 stars">
                    <i class="fas fa-star"></i>
                  </label>
                  <input type="radio" id="star2" name="rating" value="2">
                  <label for="star2" title="Fair" aria-label="2 stars">
                    <i class="fas fa-star"></i>
                  </label>
                  <input type="radio" id="star1" name="rating" value="1">
                  <label for="star1" title="Poor" aria-label="1 star">
                    <i class="fas fa-star"></i>
                  </label>
                </div>
                <div class="rating-text mt-2 text-muted">
                  Click on a star to rate
                </div>
              </div>
              
              <div class="mb-4">
                <label class="form-label fw-semibold">Your Review</label>
                <textarea 
                  class="form-control review-textarea" 
                  name="review" 
                  rows="4" 
                  placeholder="Tell us what you loved, what could be better, or any suggestions you have..."
                  required
                  aria-label="Your review"
                ></textarea>
              </div>
              
              <button class="btn-submit" type="submit" aria-label="Submit review and get AI response">
                <i class="fas fa-paper-plane me-2"></i>
                <span>Submit & Get AI Response</span>
              </button>
            </form>
            
            <div id="response" class="ai-response" style="display:none;" aria-live="polite">
              <div class="ai-header">
                <i class="fas fa-robot me-2"></i>
                <span>AI Generated Response</span>
              </div>
              <div class="ai-content" id="responseText"></div>
              <div class="ai-footer">
                <small>This response is generated by our AI based on your feedback</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Features Section -->
<section id="features" class="features-section">
  <div class="container">
    <div class="section-header text-center mb-5">
      <h2>Why Your Feedback Matters</h2>
      <p class="section-subtitle">See how your input makes a difference</p>
    </div>
    
    <div class="row g-4">
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-bolt"></i>
          </div>
          <h4>Instant AI Analysis</h4>
          <p>Our AI analyzes your feedback in real-time and generates thoughtful, personalized responses within seconds.</p>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <h4>Actionable Insights</h4>
          <p>Your feedback is aggregated with others to identify trends and prioritize product improvements.</p>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fas fa-users"></i>
          </div>
          <h4>Community Impact</h4>
          <p>Join thousands of users shaping the future of our product. See real changes based on collective feedback.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- How It Works Section -->
<section id="how-it-works" class="how-it-works-section">
  <div class="container">
    <div class="section-header text-center mb-5">
      <h2>How It Works</h2>
      <p class="section-subtitle">Three simple steps to make your voice heard</p>
    </div>
    
    <div class="steps">
      <div class="step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h4>Share Your Experience</h4>
          <p>Rate our product and write your honest review. Be as detailed as you like!</p>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-content">
          <h4>AI Processes Feedback</h4>
          <p>Our AI analyzes sentiment, extracts key points, and prepares a personalized response.</p>
        </div>
      </div>
      
      <div class="step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h4>Receive Instant Response</h4>
          <p>Get an AI-generated reply that acknowledges your feedback and addresses your points.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-brand">
        <div class="brand-icon">
          <i class="fas fa-comment-alt"></i>
        </div>
        <div>
          <h5>FyndFeedback AI</h5>
          <p class="footer-text">Bridging the gap between users and product teams</p>
        </div>
      </div>
      
      <div class="footer-links">
        <a href="#" class="footer-link">Privacy Policy</a>
        <a href="#" class="footer-link">Terms of Service</a>
        <a href="#" class="footer-link">Contact Us</a>
      </div>
    </div>
    
    <div class="footer-bottom text-center">
      <small class="text-muted">
        Built for Fynd AI Intern Assessment • User & Admin views share the same data source
      </small>
    </div>
  </div>
</footer>

<script>
  // Fixed Star Rating System
  document.addEventListener('DOMContentLoaded', function() {
    const stars = document.querySelectorAll('.star-rating label');
    const starInputs = document.querySelectorAll('.star-rating input');
    const ratingText = document.querySelector('.rating-text');
    
    // Initialize with 3 stars selected
    starInputs[2].checked = true;
    updateStarDisplay(3);
    
    stars.forEach((star, index) => {
      star.addEventListener('click', function(e) {
        e.preventDefault();
        const rating = 5 - index;
        updateStarDisplay(rating);
        ratingText.textContent = `You rated: ${rating} out of 5 stars`;
        // Update the radio button
        starInputs[index].checked = true;
      });
      
      star.addEventListener('touchstart', function(e) {
        e.preventDefault();
        const rating = 5 - index;
        updateStarDisplay(rating);
        ratingText.textContent = `You rated: ${rating} out of 5 stars`;
        starInputs[index].checked = true;
      });
      
      star.addEventListener('mouseover', function() {
        const rating = 5 - index;
        highlightStars(rating);
        ratingText.textContent = `Rate: ${rating} out of 5 stars`;
      });
    });
    
    // Add mouseout event to reset to current selection
    document.querySelector('.star-rating').addEventListener('mouseout', function() {
      const currentRating = document.querySelector('.star-rating input:checked').value;
      updateStarDisplay(parseInt(currentRating));
      ratingText.textContent = `You rated: ${currentRating} out of 5 stars`;
    });
    
    function updateStarDisplay(rating) {
      stars.forEach((star, index) => {
        const starRating = 5 - index;
        const icon = star.querySelector('i');
        if (starRating <= rating) {
          icon.classList.add('active');
          icon.classList.remove('inactive');
        } else {
          icon.classList.remove('active');
          icon.classList.add('inactive');
        }
      });
    }
    
    function highlightStars(rating) {
      stars.forEach((star, index) => {
        const starRating = 5 - index;
        const icon = star.querySelector('i');
        if (starRating <= rating) {
          icon.style.color = '#ffc107';
        } else {
          icon.style.color = '#ddd';
        }
      });
    }
    
    // Initialize star colors
    updateStarDisplay(3);
  });

  // Submit review -> call backend -> show AI reply
  document.getElementById("reviewForm").onsubmit = async (e) => {
    e.preventDefault();
    const btn = e.target.querySelector(".btn-submit");
    const originalText = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Generating AI response...';

    // Get selected rating
    const ratingInput = document.querySelector('input[name="rating"]:checked');
    const rating = ratingInput ? ratingInput.value : '3';
    
    // Create form data
    const formData = new FormData();
    formData.append('rating', rating);
    formData.append('review', document.querySelector('textarea[name="review"]').value);

    try {
      const res = await fetch("/submit", {
        method: "POST",
        body: formData
      });
      
      if (!res.ok) {
        throw new Error(`HTTP error! status: ${res.status}`);
      }
      
      const data = await res.json();
      document.getElementById("responseText").innerText = data.ai_reply || "Thank you for your feedback!";
      document.getElementById("response").style.display = "block";
      
      // Smooth scroll to response
      document.getElementById("response").scrollIntoView({ 
        behavior: 'smooth', 
        block: 'nearest' 
      });
      
      // Clear form after successful submission
      document.querySelector('textarea[name="review"]').value = '';
      
    } catch (err) {
      console.error('Error:', err);
      document.getElementById("responseText").innerText =
        "We apologize, but we're experiencing technical difficulties. Please try again in a moment.";
      document.getElementById("response").style.display = "block";
    } finally {
      btn.disabled = false;
      btn.innerHTML = '<i class="fas fa-paper-plane me-2"></i><span>Submit & Get AI Response</span>';
    }
  };

  // Admin button functionality for all versions
  function openAdminPanel() {
    const name = prompt("Enter your name for the admin dashboard:");
    if (name && name.trim() !== "") {
      window.open("/admin?name=" + encodeURIComponent(name.trim()), "_blank");
    }
  }

  // Attach to all admin buttons
  document.getElementById("admin-btn-mobile")?.addEventListener("click", openAdminPanel);
  document.getElementById("admin-btn-desktop")?.addEventListener("click", openAdminPanel);
  document.getElementById("admin-btn-dropdown")?.addEventListener("click", openAdminPanel);

  // Mobile menu collapse after click
  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', () => {
      const navbarCollapse = document.querySelector('.navbar-collapse');
      if (navbarCollapse.classList.contains('show')) {
        const bsCollapse = new bootstrap.Collapse(navbarCollapse);
        bsCollapse.hide();
      }
    });
  });

  // Add active class to navbar links on scroll
  window.addEventListener('scroll', function() {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 50) {
      navbar.classList.add('navbar-scrolled');
    } else {
      navbar.classList.remove('navbar-scrolled');
    }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>